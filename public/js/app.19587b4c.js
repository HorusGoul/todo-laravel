webpackJsonp([1],{"+VGo":function(t,e){},0:function(t,e,n){t.exports=n("x35b")},"0gMf":function(t,e){},"6lFQ":function(t,e){},"6nu6":function(t,e){},"93Jy":function(t,e){},GcMe:function(t,e){},TSbw:function(t,e){},jVlL:function(t,e){},x35b:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("mtWM"),o=n.n(r),a=function(){function t(){this.apiUrl="https://todo-laravel-horus.herokuapp.com/api/",this.http=o.a.create({baseURL:this.apiUrl})}return t.prototype.setAuthToken=function(t){t?this.http.defaults.headers.common.Authorization="Bearer "+t:this.removeAuthToken()},t.prototype.removeAuthToken=function(){this.http.defaults.headers.common.Authorization=void 0},t.prototype.get=function(t,e){return this.http.get(t,e)},t.prototype.post=function(t,e,n){return this.http.post(t,e,n)},t.prototype.put=function(t,e,n){return this.http.put(t,e,n)},t.prototype.delete=function(t,e){return this.http.delete(t,e)},t}(),i=new a,s=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r["throw"](t))}catch(t){a(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(i,s)}u((r=r.apply(t,e||[])).next())})},u=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(t){return function(e){return u([t,e])}}function u(a){if(n)throw new TypeError("Generator is already executing.");while(i)try{if(n=1,r&&(o=r[2&a[0]?"return":a[0]?"throw":"next"])&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[0,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(o=i.trys,!(o=o.length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},c="todo-laravel::token",l=function(){function t(){this.listeners=[],this.currentToken=null}return t.prototype.init=function(){return s(this,void 0,void 0,function(){var t;return u(this,function(e){return t=localStorage.getItem(c),i.http.interceptors.response.use(null,this.onApiResponseError.bind(this)),this.setToken(t),[2]})})},t.prototype.login=function(t){return s(this,void 0,void 0,function(){var e;return u(this,function(n){switch(n.label){case 0:return[4,i.post("login",t)];case 1:return e=n.sent(),this.setToken(e.data.api_token),[2]}})})},t.prototype.signup=function(t){return s(this,void 0,void 0,function(){var e;return u(this,function(n){switch(n.label){case 0:return[4,i.post("signup",t)];case 1:return e=n.sent(),this.setToken(e.data.api_token),[2]}})})},t.prototype.logout=function(){this.removeToken()},t.prototype.addAuthListener=function(t){this.listeners.push(t)},t.prototype.setToken=function(t){this.currentToken=t,localStorage.setItem(c,t),i.setAuthToken(t),this.notifyListeners()},t.prototype.removeToken=function(){this.currentToken=null,i.removeAuthToken(),this.notifyListeners(),localStorage.removeItem(c)},t.prototype.notifyListeners=function(){var t=this;this.listeners.forEach(function(e){return e(t.currentToken)})},t.prototype.onApiResponseError=function(t){401===t.response.status&&this.removeToken()},t}(),p=new l,d=n("/5sW"),f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},h=[],v=n("XyMi");function m(t){n("+VGo")}var b=null,k=!1,w=m,y=null,g=null,_=Object(v["a"])(b,f,h,k,w,y,g),x=_.exports,T=(n("GcMe"),n("/ocq")),C=d["a"].extend({name:"login",data:function(){return{email:"",password:""}},methods:{onSubmit:function(){var t=this,e=t.email,n=t.password;p.login({email:e,password:n})}}}),L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login"},[n("form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[n("h1",[t._v("Iniciar sesión")]),n("div",{staticClass:"input-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{id:"email",type:"email",required:"",placeholder:"example@example.com"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),n("label",{attrs:{for:"email"}},[t._v("\n        Email\n      ")])]),n("div",{staticClass:"input-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{id:"password",type:"password",required:"",placeholder:"Password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),n("label",{attrs:{for:"password"}},[t._v("\n        Contraseña\n      ")])]),n("button",{attrs:{disabled:!t.email||!t.password}},[t._v("\n      Conectar\n    ")])]),n("div",{staticClass:"divider"},[t._v("— o —")]),n("router-link",{attrs:{to:{name:"signup"},tag:"button"}},[t._v("Registro")])],1)},A=[];function E(t){n("93Jy")}var S=!1,$=E,P="data-v-5b3cb76c",U=null,j=Object(v["a"])(C,L,A,S,$,P,U),q=j.exports,F=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r["throw"](t))}catch(t){a(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(i,s)}u((r=r.apply(t,e||[])).next())})},O=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(t){return function(e){return u([t,e])}}function u(a){if(n)throw new TypeError("Generator is already executing.");while(i)try{if(n=1,r&&(o=r[2&a[0]?"return":a[0]?"throw":"next"])&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[0,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(o=i.trys,!(o=o.length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},z=function(){function t(){this.listeners=[],this.currentUser=null}return t.prototype.init=function(){p.addAuthListener(this.requestUserData.bind(this))},t.prototype.getCurrentUser=function(){return this.currentUser},t.prototype.addUserListener=function(t){this.listeners.push(t)},t.prototype.requestUserData=function(t){return F(this,void 0,void 0,function(){var e,n;return O(this,function(r){switch(r.label){case 0:return t?[4,i.get("user")]:[2];case 1:return e=r.sent(),n=e.data,this.currentUser=n,this.notifyListeners(),[2]}})})},t.prototype.notifyListeners=function(){var t=this;this.listeners.forEach(function(e){return e(t.currentUser)})},t}(),G=new z,M=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r["throw"](t))}catch(t){a(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(i,s)}u((r=r.apply(t,e||[])).next())})},N=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(t){return function(e){return u([t,e])}}function u(a){if(n)throw new TypeError("Generator is already executing.");while(i)try{if(n=1,r&&(o=r[2&a[0]?"return":a[0]?"throw":"next"])&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[0,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(o=i.trys,!(o=o.length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},D=function(){function t(){}return t.prototype.getAll=function(){return M(this,void 0,void 0,function(){var t;return N(this,function(e){switch(e.label){case 0:return[4,i.get("task")];case 1:return t=e.sent(),[2,t.data]}})})},t.prototype.delete=function(t){return M(this,void 0,void 0,function(){return N(this,function(e){switch(e.label){case 0:return[4,i.delete("task/"+t.id)];case 1:return e.sent(),[2]}})})},t.prototype.update=function(t){return M(this,void 0,void 0,function(){return N(this,function(e){switch(e.label){case 0:return[4,i.put("task/"+t.id,t)];case 1:return e.sent(),[2]}})})},t.prototype.getOne=function(t){return M(this,void 0,void 0,function(){var e;return N(this,function(n){switch(n.label){case 0:return[4,i.get("task/"+t)];case 1:return e=n.sent(),[2,e.data]}})})},t.prototype.create=function(t){return M(this,void 0,void 0,function(){var e;return N(this,function(n){switch(n.label){case 0:return[4,i.post("task",t)];case 1:return e=n.sent(),[2,e.data]}})})},t}(),I=new D,R=d["a"].extend({name:"auto-textarea",props:["value"],watch:{value:{handler:function(){var t=this;d["a"].nextTick(function(){return t.resizeTextarea()})}}},methods:{onInput:function(){var t=this.$refs.content;this.$emit("input",t.value)},resizeTextarea:function(){var t=this.$refs.content;t.style.height="auto",t.style.height=t.scrollHeight+"px"}},mounted:function(){this.resizeTextarea()}}),V=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("textarea",{ref:"content",domProps:{value:t.value},on:{input:t.onInput}})},J=[];function B(t){n("6lFQ")}var H=!1,Q=B,W="data-v-0dacdfc8",X=null,K=Object(v["a"])(R,V,J,H,Q,W,X),Y=K.exports,Z=n("M4fF"),tt=n.n(Z),et=d["a"].extend({name:"todo-task",components:{AutoTextarea:Y},props:["task","deleteTask"],watch:{task:{deep:!0,handler:tt.a.debounce(function(t){I.update(t)},250)}}}),nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"task",class:{completed:t.task.completed}},[n("div",{staticClass:"toolbar"},[n("div",{staticClass:"checkbox"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.task.completed,expression:"task.completed"}],attrs:{id:"completed"+t.task.id,type:"checkbox"},domProps:{checked:Array.isArray(t.task.completed)?t._i(t.task.completed,null)>-1:t.task.completed},on:{change:function(e){var n=t.task.completed,r=e.target,o=!!r.checked;if(Array.isArray(n)){var a=null,i=t._i(n,a);r.checked?i<0&&t.$set(t.task,"completed",n.concat([a])):i>-1&&t.$set(t.task,"completed",n.slice(0,i).concat(n.slice(i+1)))}else t.$set(t.task,"completed",o)}}}),n("label",{attrs:{for:"completed"+t.task.id}},[t._v("\n          Completada\n        ")])]),n("button",{staticClass:"delete",on:{click:function(e){t.deleteTask(t.task)}}},[t._v("\n        Borrar\n      ")])]),n("auto-textarea",{staticClass:"content",attrs:{disabled:t.task.completed||1===t.task.completed,rows:"1"},model:{value:t.task.content,callback:function(e){t.$set(t.task,"content",e)},expression:"task.content"}})],1)},rt=[];function ot(t){n("TSbw")}var at=!1,it=ot,st="data-v-562bac60",ut=null,ct=Object(v["a"])(et,nt,rt,at,it,st,ut),lt=ct.exports,pt=d["a"].extend({name:"todo-list",components:{TodoTask:lt},props:["taskList","deleteTask"]}),dt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"todo-list"},t._l(t.taskList,function(e){return n("todo-task",{key:e.id,attrs:{task:e,"delete-task":t.deleteTask}})}))},ft=[];function ht(t){n("0gMf")}var vt=!1,mt=ht,bt="data-v-8fa66ab0",kt=null,wt=Object(v["a"])(pt,dt,ft,vt,mt,bt,kt),yt=wt.exports,gt=d["a"].extend({name:"task-editor",components:{AutoTextarea:Y},props:["createTask"],data:function(){return{content:""}},methods:{addTask:function(){this.createTask({content:this.content}),this.clearForm()},clearForm:function(){this.content=""}}}),_t=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"task-editor"},[n("form",{on:{submit:function(e){return e.preventDefault(),t.addTask(e)}}},[n("div",{staticClass:"input-group"},[n("auto-textarea",{attrs:{id:"content",required:"",placeholder:"Hacer un proyectillo de Laravel",rows:"1"},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),n("label",{attrs:{for:"content"}},[t._v("\n        Nueva tarea\n      ")])],1),t.content?n("button",{staticClass:"create-task-btn"},[t._v("Añadir tarea")]):t._e()])])},xt=[];function Tt(t){n("jVlL")}var Ct=!1,Lt=Tt,At="data-v-3b0aa516",Et=null,St=Object(v["a"])(gt,_t,xt,Ct,Lt,At,Et),$t=St.exports,Pt=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r["throw"](t))}catch(t){a(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(i,s)}u((r=r.apply(t,e||[])).next())})},Ut=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(t){return function(e){return u([t,e])}}function u(a){if(n)throw new TypeError("Generator is already executing.");while(i)try{if(n=1,r&&(o=r[2&a[0]?"return":a[0]?"throw":"next"])&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[0,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(o=i.trys,!(o=o.length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},jt="all",qt="completed",Ft="active",Ot=d["a"].extend({name:"dashboard",components:{TodoList:yt,TaskEditor:$t},data:function(){var t=null;return{user:t,taskList:[],mode:"all"}},methods:{logout:function(){p.logout()},setUser:function(t){this.user=t},fetchTasks:function(){return Pt(this,void 0,void 0,function(){var t;return Ut(this,function(e){switch(e.label){case 0:return[4,I.getAll()];case 1:return t=e.sent(),this.setTasks(t),[2]}})})},deleteTask:function(t){return Pt(this,void 0,void 0,function(){return Ut(this,function(e){switch(e.label){case 0:return[4,I.delete(t)];case 1:return e.sent(),this.setTasks(this.taskList.filter(function(e){return e!==t})),[2]}})})},createTask:function(t){return Pt(this,void 0,void 0,function(){var e;return Ut(this,function(n){switch(n.label){case 0:return[4,I.create(t)];case 1:return e=n.sent(),this.setTasks([e].concat(this.taskList)),[2]}})})},setTasks:function(t){this.taskList=t.sort(function(t,e){var n=+new Date(t.created_at),r=+new Date(e.created_at);return r-n})},setCompletedFilter:function(){this.mode=qt},setActiveFilter:function(){this.mode=Ft},setAllFilter:function(){this.mode=jt}},mounted:function(){G.addUserListener(this.setUser.bind(this)),this.fetchTasks()},computed:{filteredTaskList:function(){if("completed"===this.mode)return this.taskList.filter(function(t){return t.completed});switch(this.mode){case Ft:return this.taskList.filter(function(t){return!t.completed});case qt:return this.taskList.filter(function(t){return t.completed});default:return this.taskList}}}}),zt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"dashboard"},[n("div",{staticClass:"topbar"},[n("h1",[t._v("Todo-Laravel")]),n("span",{staticClass:"username"},[t._v("\n      "+t._s(t.user&&t.user.name)+"\n    ")]),n("button",{staticClass:"logout",on:{click:t.logout}},[t._v("\n      Logout\n    ")])]),n("task-editor",{staticClass:"panel",attrs:{"create-task":t.createTask}}),n("div",{staticClass:"toolbar panel"},[n("button",{on:{click:t.setAllFilter}},[t._v("\n      Todas\n    ")]),n("button",{on:{click:t.setActiveFilter}},[t._v("\n      Activas\n    ")]),n("button",{on:{click:t.setCompletedFilter}},[t._v("\n      Completadas\n    ")])]),n("todo-list",{attrs:{taskList:t.filteredTaskList,"delete-task":t.deleteTask}})],1)},Gt=[];function Mt(t){n("zhqe")}var Nt=!1,Dt=Mt,It="data-v-31417d22",Rt=null,Vt=Object(v["a"])(Ot,zt,Gt,Nt,Dt,It,Rt),Jt=Vt.exports,Bt=d["a"].extend({name:"signup",data:function(){return{email:"",password:"",name:""}},methods:{onSubmit:function(){var t=this,e=t.email,n=t.password,r=t.name;p.signup({email:e,password:n,name:r})}}}),Ht=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"signup"},[n("form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[n("h1",[t._v("Crear cuenta")]),n("div",{staticClass:"input-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],attrs:{id:"name",type:"text",required:"",placeholder:"Paco Sanz"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),n("label",{attrs:{for:"name"}},[t._v("\n        Nombre\n      ")])]),n("div",{staticClass:"input-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{id:"email",type:"email",required:"",placeholder:"example@example.com"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),n("label",{attrs:{for:"email"}},[t._v("\n        Email\n      ")])]),n("div",{staticClass:"input-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{id:"password",type:"password",required:"",placeholder:"Password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),n("label",{attrs:{for:"password"}},[t._v("\n        Contraseña\n      ")])]),n("button",{attrs:{disabled:!t.email||!t.password||!t.name}},[t._v("\n      Crear cuenta\n    ")])]),n("div",{staticClass:"divider"},[t._v("— o —")]),n("router-link",{attrs:{to:{name:"login"},tag:"button"}},[t._v("Iniciar sesión")])],1)},Qt=[];function Wt(t){n("6nu6")}var Xt=!1,Kt=Wt,Yt="data-v-795818d9",Zt=null,te=Object(v["a"])(Bt,Ht,Qt,Xt,Kt,Yt,Zt),ee=te.exports;d["a"].use(T["a"]);var ne=new T["a"]({routes:[{path:"/login",name:"login",component:q},{path:"/signup",name:"signup",component:ee},{path:"/dashboard",name:"dashboard",component:Jt}]});p.addAuthListener(function(t){t?ne.push({name:"dashboard"}):ne.push({name:"login"})}),G.init(),p.init(),d["a"].config.productionTip=!1,new d["a"]({router:ne,render:function(t){return t(x)}}).$mount("#app")},zhqe:function(t,e){}},[0]);
//# sourceMappingURL=app.19587b4c.js.map