webpackJsonp([1],{"+VGo":function(t,e){},0:function(t,e,n){t.exports=n("x35b")},"6nu6":function(t,e){},"93Jy":function(t,e){},GcMe:function(t,e){},iupP:function(t,e){},oaeG:function(t,e){},r7Ay:function(t,e){},vayk:function(t,e){},x35b:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("mtWM"),o=n.n(r),a=function(){function t(){this.apiUrl="https://todo-laravel-horus.herokuapp.com/api/",this.http=o.a.create({baseURL:this.apiUrl})}return t.prototype.setAuthToken=function(t){t?this.http.defaults.headers.common.Authorization="Bearer "+t:this.removeAuthToken()},t.prototype.removeAuthToken=function(){this.http.defaults.headers.common.Authorization=void 0},t.prototype.get=function(t,e){return this.http.get(t,e)},t.prototype.post=function(t,e,n){return this.http.post(t,e,n)},t.prototype.put=function(t,e,n){return this.http.put(t,e,n)},t.prototype.delete=function(t,e){return this.http.delete(t,e)},t}(),i=new a,s=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r["throw"](t))}catch(t){a(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(i,s)}u((r=r.apply(t,e||[])).next())})},u=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(t){return function(e){return u([t,e])}}function u(a){if(n)throw new TypeError("Generator is already executing.");while(i)try{if(n=1,r&&(o=r[2&a[0]?"return":a[0]?"throw":"next"])&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[0,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(o=i.trys,!(o=o.length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},c="todo-laravel::token",l=function(){function t(){this.listeners=[],this.currentToken=null}return t.prototype.init=function(){return s(this,void 0,void 0,function(){var t;return u(this,function(e){return t=localStorage.getItem(c),this.setToken(t),[2]})})},t.prototype.login=function(t){return s(this,void 0,void 0,function(){var e;return u(this,function(n){switch(n.label){case 0:return[4,i.post("login",t)];case 1:return e=n.sent(),this.setToken(e.data.api_token),[2]}})})},t.prototype.signup=function(t){return s(this,void 0,void 0,function(){var e;return u(this,function(n){switch(n.label){case 0:return[4,i.post("signup",t)];case 1:return e=n.sent(),this.setToken(e.data.api_token),[2]}})})},t.prototype.logout=function(){this.removeToken()},t.prototype.addAuthListener=function(t){this.listeners.push(t)},t.prototype.setToken=function(t){this.currentToken=t,localStorage.setItem(c,t),i.setAuthToken(t),this.notifyListeners()},t.prototype.removeToken=function(){this.currentToken=null,i.removeAuthToken(),this.notifyListeners(),localStorage.removeItem(c)},t.prototype.notifyListeners=function(){var t=this;this.listeners.forEach(function(e){return e(t.currentToken)})},t}(),p=new l,d=n("/5sW"),f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},h=[],v=n("XyMi");function m(t){n("+VGo")}var b=null,k=!1,y=m,w=null,g=null,_=Object(v["a"])(b,f,h,k,y,w,g),x=_.exports,T=(n("GcMe"),n("/ocq")),C=d["a"].extend({name:"login",data:function(){return{email:"",password:""}},methods:{onSubmit:function(){var t=this,e=t.email,n=t.password;p.login({email:e,password:n})}}}),L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login"},[n("form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[n("h1",[t._v("Iniciar sesión")]),n("div",{staticClass:"input-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{id:"email",type:"email",required:"",placeholder:"example@example.com"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),n("label",{attrs:{for:"email"}},[t._v("\n        Email\n      ")])]),n("div",{staticClass:"input-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{id:"password",type:"password",required:"",placeholder:"Password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),n("label",{attrs:{for:"password"}},[t._v("\n        Contraseña\n      ")])]),n("button",{attrs:{disabled:!t.email||!t.password}},[t._v("\n      Conectar\n    ")])]),n("div",{staticClass:"divider"},[t._v("— o —")]),n("router-link",{attrs:{to:{name:"signup"},tag:"button"}},[t._v("Registro")])],1)},A=[];function P(t){n("93Jy")}var E=!1,S=P,U="data-v-5b3cb76c",$=null,G=Object(v["a"])(C,L,A,E,S,U,$),N=G.exports,q=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r["throw"](t))}catch(t){a(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(i,s)}u((r=r.apply(t,e||[])).next())})},O=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(t){return function(e){return u([t,e])}}function u(a){if(n)throw new TypeError("Generator is already executing.");while(i)try{if(n=1,r&&(o=r[2&a[0]?"return":a[0]?"throw":"next"])&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[0,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(o=i.trys,!(o=o.length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},j=function(){function t(){this.listeners=[],this.currentUser=null}return t.prototype.init=function(){p.addAuthListener(this.requestUserData.bind(this))},t.prototype.getCurrentUser=function(){return this.currentUser},t.prototype.addUserListener=function(t){this.listeners.push(t)},t.prototype.requestUserData=function(t){return q(this,void 0,void 0,function(){var e,n;return O(this,function(r){switch(r.label){case 0:return t?[4,i.get("user")]:[2];case 1:return e=r.sent(),n=e.data,this.currentUser=n,this.notifyListeners(),[2]}})})},t.prototype.notifyListeners=function(){var t=this;this.listeners.forEach(function(e){return e(t.currentUser)})},t}(),D=new j,M=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r["throw"](t))}catch(t){a(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(i,s)}u((r=r.apply(t,e||[])).next())})},I=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(t){return function(e){return u([t,e])}}function u(a){if(n)throw new TypeError("Generator is already executing.");while(i)try{if(n=1,r&&(o=r[2&a[0]?"return":a[0]?"throw":"next"])&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[0,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(o=i.trys,!(o=o.length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},z=function(){function t(){}return t.prototype.getAll=function(){return M(this,void 0,void 0,function(){var t;return I(this,function(e){switch(e.label){case 0:return[4,i.get("task")];case 1:return t=e.sent(),[2,t.data]}})})},t.prototype.delete=function(t){return M(this,void 0,void 0,function(){return I(this,function(e){switch(e.label){case 0:return[4,i.delete("task/"+t.id)];case 1:return e.sent(),[2]}})})},t.prototype.update=function(t){return M(this,void 0,void 0,function(){return I(this,function(e){switch(e.label){case 0:return[4,i.put("task/"+t.id,t)];case 1:return e.sent(),[2]}})})},t.prototype.getOne=function(t){return M(this,void 0,void 0,function(){var e;return I(this,function(n){switch(n.label){case 0:return[4,i.get("task/"+t)];case 1:return e=n.sent(),[2,e.data]}})})},t.prototype.create=function(t){return M(this,void 0,void 0,function(){var e;return I(this,function(n){switch(n.label){case 0:return[4,i.post("task",t)];case 1:return e=n.sent(),[2,e.data]}})})},t}(),F=new z,J=n("M4fF"),R=n.n(J),V=d["a"].extend({name:"todo-task",props:["task","deleteTask"],watch:{task:{deep:!0,handler:R.a.debounce(function(t){F.update(t)},250)}}}),W=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"task",class:{completed:t.task.completed}},[n("div",{staticClass:"checkbox"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.task.completed,expression:"task.completed"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.task.completed)?t._i(t.task.completed,null)>-1:t.task.completed},on:{change:function(e){var n=t.task.completed,r=e.target,o=!!r.checked;if(Array.isArray(n)){var a=null,i=t._i(n,a);r.checked?i<0&&t.$set(t.task,"completed",n.concat([a])):i>-1&&t.$set(t.task,"completed",n.slice(0,i).concat(n.slice(i+1)))}else t.$set(t.task,"completed",o)}}})]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.task.content,expression:"task.content"}],staticClass:"content",attrs:{disabled:t.task.completed||1===t.task.completed,type:"text"},domProps:{value:t.task.content},on:{input:function(e){e.target.composing||t.$set(t.task,"content",e.target.value)}}}),n("button",{staticClass:"delete",on:{click:function(e){t.deleteTask(t.task)}}},[t._v("\n      X\n    ")])])},X=[];function B(t){n("iupP")}var H=!1,K=B,Q="data-v-f5f71cb2",Y=null,Z=Object(v["a"])(V,W,X,H,K,Q,Y),tt=Z.exports,et=d["a"].extend({name:"todo-list",components:{TodoTask:tt},props:["taskList","deleteTask"]}),nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"todo-list"},t._l(t.taskList,function(e){return n("todo-task",{key:e.id,attrs:{task:e,"delete-task":t.deleteTask}})}))},rt=[];function ot(t){n("vayk")}var at=!1,it=ot,st="data-v-135fed4f",ut=null,ct=Object(v["a"])(et,nt,rt,at,it,st,ut),lt=ct.exports,pt=d["a"].extend({name:"task-editor",props:["createTask"],data:function(){return{content:""}},methods:{addTask:function(){this.createTask({content:this.content}),this.clearForm()},clearForm:function(){this.content=""}}}),dt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"task-editor"},[n("form",{on:{submit:function(e){return e.preventDefault(),t.addTask(e)}}},[n("div",{staticClass:"input-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],attrs:{id:"content",type:"text",required:"",placeholder:"Hacer un proyectillo de Laravel"},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}}),n("label",{attrs:{for:"content"}},[t._v("\n        Nueva tarea\n      ")])]),t.content?n("button",{staticClass:"create-task-btn"},[t._v("Añadir tarea")]):t._e()])])},ft=[];function ht(t){n("r7Ay")}var vt=!1,mt=ht,bt="data-v-3e542b6a",kt=null,yt=Object(v["a"])(pt,dt,ft,vt,mt,bt,kt),wt=yt.exports,gt=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r["throw"](t))}catch(t){a(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(i,s)}u((r=r.apply(t,e||[])).next())})},_t=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(t){return function(e){return u([t,e])}}function u(a){if(n)throw new TypeError("Generator is already executing.");while(i)try{if(n=1,r&&(o=r[2&a[0]?"return":a[0]?"throw":"next"])&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[0,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(o=i.trys,!(o=o.length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},xt=d["a"].extend({name:"dashboard",components:{TodoList:lt,TaskEditor:wt},data:function(){var t=null;return{user:t,taskList:[]}},methods:{logout:function(){p.logout()},setUser:function(t){this.user=t},fetchTasks:function(){return gt(this,void 0,void 0,function(){var t;return _t(this,function(e){switch(e.label){case 0:return[4,F.getAll()];case 1:return t=e.sent(),this.setTasks(t),[2]}})})},deleteTask:function(t){return gt(this,void 0,void 0,function(){return _t(this,function(e){switch(e.label){case 0:return[4,F.delete(t)];case 1:return e.sent(),this.setTasks(this.taskList.filter(function(e){return e!==t})),[2]}})})},createTask:function(t){return gt(this,void 0,void 0,function(){var e;return _t(this,function(n){switch(n.label){case 0:return[4,F.create(t)];case 1:return e=n.sent(),this.setTasks([e].concat(this.taskList)),[2]}})})},setTasks:function(t){this.taskList=t.sort(function(t,e){var n=+new Date(t.created_at),r=+new Date(e.created_at);return r-n})}},mounted:function(){D.addUserListener(this.setUser.bind(this)),this.fetchTasks()}}),Tt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"dashboard"},[n("div",{staticClass:"topbar"},[n("h1",[t._v("Todo-Laravel")]),n("span",{staticClass:"username"},[t._v("\n      "+t._s(t.user&&t.user.name)+"\n    ")]),n("button",{staticClass:"logout",on:{click:t.logout}},[t._v("\n      Logout\n    ")])]),n("task-editor",{staticClass:"panel",attrs:{"create-task":t.createTask}}),n("div",{staticClass:"panel"},[n("todo-list",{attrs:{taskList:t.taskList,"delete-task":t.deleteTask}})],1)],1)},Ct=[];function Lt(t){n("oaeG")}var At=!1,Pt=Lt,Et="data-v-608e9743",St=null,Ut=Object(v["a"])(xt,Tt,Ct,At,Pt,Et,St),$t=Ut.exports,Gt=d["a"].extend({name:"signup",data:function(){return{email:"",password:"",name:""}},methods:{onSubmit:function(){var t=this,e=t.email,n=t.password,r=t.name;p.signup({email:e,password:n,name:r})}}}),Nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"signup"},[n("form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[n("h1",[t._v("Crear cuenta")]),n("div",{staticClass:"input-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],attrs:{id:"name",type:"text",required:"",placeholder:"Paco Sanz"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),n("label",{attrs:{for:"name"}},[t._v("\n        Nombre\n      ")])]),n("div",{staticClass:"input-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{id:"email",type:"email",required:"",placeholder:"example@example.com"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),n("label",{attrs:{for:"email"}},[t._v("\n        Email\n      ")])]),n("div",{staticClass:"input-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{id:"password",type:"password",required:"",placeholder:"Password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),n("label",{attrs:{for:"password"}},[t._v("\n        Contraseña\n      ")])]),n("button",{attrs:{disabled:!t.email||!t.password||!t.name}},[t._v("\n      Crear cuenta\n    ")])]),n("div",{staticClass:"divider"},[t._v("— o —")]),n("router-link",{attrs:{to:{name:"login"},tag:"button"}},[t._v("Iniciar sesión")])],1)},qt=[];function Ot(t){n("6nu6")}var jt=!1,Dt=Ot,Mt="data-v-795818d9",It=null,zt=Object(v["a"])(Gt,Nt,qt,jt,Dt,Mt,It),Ft=zt.exports;d["a"].use(T["a"]);var Jt=new T["a"]({routes:[{path:"/login",name:"login",component:N},{path:"/signup",name:"signup",component:Ft},{path:"/dashboard",name:"dashboard",component:$t}]});p.addAuthListener(function(t){t?Jt.push({name:"dashboard"}):Jt.push({name:"login"})}),D.init(),p.init(),d["a"].config.productionTip=!1,new d["a"]({router:Jt,render:function(t){return t(x)}}).$mount("#app")}},[0]);
//# sourceMappingURL=app.f29d416a.js.map